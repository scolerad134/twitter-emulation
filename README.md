# Twitter Emulation Project

## Описание проекта

Этот проект представляет собой простое приложение, эмулирующее основные функции социальной сети Twitter. Пользователи могут регистрироваться, публиковать сообщения, подписываться на других пользователей и просматривать ленту сообщений. Проект разработан с использованием Spring Boot и PostgreSQL, с возможностью запуска в Docker-контейнерах.

## Возможности

- Регистрация и аутентификация пользователей
- Создание и просмотр сообщений (твитов)
- Подписка и отписка от других пользователей
- Просмотр профилей пользователей
- Загрузка изображений к сообщениям
- Управление ролями пользователей (USER, ADMIN)

## Используемые технологии

- **Backend**: Java 17, Spring Boot, Spring Security, Spring Data JPA, Apache Freemarker
- **База данных**: PostgreSQL 10
- **Миграции базы данных**: Flyway
- **Сборка**: Maven
- **Контейнеризация**: Docker, Docker Compose
- **Фронтенд**: HTML, CSS (стандартные шаблоны Freemarker)

## Предварительные требования

Для запуска проекта вам потребуется установленное следующее программное обеспечение:

- [Docker Desktop](https://www.docker.com/products/docker-desktop) (включает Docker Engine и Docker Compose)

## Запуск проекта

Следуйте этим шагам для настройки и запуска проекта:

### 1. Клонирование репозитория

```bash
git clone <URL вашего репозитория>
cd twitter-emulation
```

### 2. Настройка базы данных PostgreSQL

Приложение использует базу данных PostgreSQL. Перед первым запуском необходимо создать пользователя и базу данных.

Подключитесь к вашему серверу PostgreSQL (например, через `psql`):

```bash
psql -U postgres
```

Затем выполните следующие команды SQL (введите `myPassword` в качестве пароля, когда будет запрошено):

```sql
CREATE USER twitter_owner WITH PASSWORD 'myPassword';
CREATE DATABASE twitter_db OWNER twitter_owner;
GRANT ALL PRIVILEGES ON DATABASE twitter_db TO twitter_owner;
\q
```

### 3. Сборка и запуск с Docker Compose

Проект настроен для запуска с использованием Docker Compose, что упрощает управление сервисами приложения (приложение и база данных).

1.  **Остановите и удалите предыдущие контейнеры (если они запущены)**:
    ```bash
    docker compose down
    ```

2.  **Пересоберите образы Docker**:
    ```bash
    docker compose build
    ```

3.  **Запустите контейнеры**:
    ```bash
    docker compose up -d
    ```

### 4. Доступ к приложению

После успешного запуска контейнеров, приложение будет доступно в вашем браузере по адресу:

[http://localhost:80/](http://localhost:8080/)

### 5. Подключение к базе данных (необязательно)

Вы можете подключиться к базе данных PostgreSQL внутри контейнера, чтобы просмотреть данные. Для этого выполните:

```bash
docker exec -it java-postgres psql -U twitter_owner -d twitter_db
```

Когда будет запрошен пароль, введите `myPassword`.

Для просмотра таблиц используйте `\dt`, а для просмотра данных, например, `SELECT * FROM users;`.

## Конфигурация

Основные файлы конфигурации:

- `src/main/resources/application.properties`: Основные настройки Spring Boot, включая параметры подключения к базе данных.
- `config/flyway.conf`: Настройки Flyway для миграции базы данных.
- `config/secret.conf`: Содержит учетные данные для Flyway (игнорируется Git).

## Структура проекта

Основные каталоги:

- `src/main/java`: Исходный код Java.
- `src/main/resources`: Ресурсы приложения (шаблоны, статика, миграции БД).
- `config`: Файлы конфигурации Flyway и секреты.
- `docker-compose.yml`: Определение сервисов Docker Compose.
- `Dockerfile`: Инструкции для сборки образа Docker для Spring Boot приложения.

## Лицензия

Этот проект распространяется под лицензией MIT. Подробности смотрите в файле `LICENSE` (если он есть).
